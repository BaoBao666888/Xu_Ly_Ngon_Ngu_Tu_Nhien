<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Quy trình Thu thập, Tăng cường, Xử lý và Biểu diễn dữ liệu</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <h1>Quy trình Thu thập, Tăng cường, Xử lý và Biểu diễn dữ liệu</h1>
    
    {% if error %}
    <p style="color: red;">{{ error }}</p>
    {% endif %}

    <div class="step" id="step1">
        <h2>Bước 1: Thu thập dữ liệu</h2>
        <form method="POST">
            <input type="hidden" name="step" value="collection">
            <label>
                <input type="radio" name="input_type" value="manual" checked onclick="toggleInputType()"> Nhập văn bản
            </label>
            <label>
                <input type="radio" name="input_type" value="web" onclick="toggleInputType()"> Lấy từ web (Sách)
            </label>
            <div id="manual_input" style="margin-top: 10px;">
                <textarea name="manual_text" rows="5" cols="60" placeholder="Nhập văn bản của bạn..."></textarea>
            </div>
            <div id="web_input" style="display: none; margin-top: 10px;">
                <p>Chọn "Lấy từ web" rồi nhấn Thực thi để tải sách.</p>
            </div>
            <br>
            <button type="submit">Thực thi Bước 1</button>
        </form>
        <div id="collection_output">
            {{ collection_output|safe }}
        </div>
        {{ select_paragraph_form|safe }}
    </div>

    <div class="step" id="step2">
        <h2>Bước 2: Tăng cường dữ liệu</h2>
        <form method="POST">
            <input type="hidden" name="step" value="augmentation">
            <p>Chọn các phương pháp tăng cường (áp dụng theo thứ tự):</p>
            <label><input type="checkbox" name="augment_options" value="back_translation"> Dịch ngược (EN-FR-EN)</label><br>
            <label><input type="checkbox" name="augment_options" value="synonym_replacement"> Thay thế từ đồng nghĩa</label><br>
            <label><input type="checkbox" name="augment_options" value="random_insertion"> Thêm ngẫu nhiên một số từ</label><br>
            <label><input type="checkbox" name="augment_options" value="random_swap"> Đổi chỗ ngẫu nhiên một số từ</label><br>
            <label><input type="checkbox" name="augment_options" value="random_deletion"> Xóa ngẫu nhiên một số từ</label><br>
            <label><input type="checkbox" name="augment_options" value="entity_replacement"> Thay thế thực thể</label><br>
            <label><input type="checkbox" name="augment_options" value="add_noise"> Thêm nhiễu</label><br>
            <br>
            <button type="submit">Thực thi Bước 2</button>
        </form>
        <div id="augmentation_output">
            {{ augmentation_result|safe }}
        </div>
    </div>

    <div class="step" id="step3">
        <h2>Bước 3: Xử lý dữ liệu</h2>
        <form method="POST">
            <input type="hidden" name="step" value="processing">
            <button type="submit">Thực thi Bước 3</button>
        </form>
        <div id="processing_output">
            {{ processing_output|safe }}
        </div>
    </div>

    <div class="step" id="step4">
        <h2>Bước 4: Biểu diễn dữ liệu</h2>
        <form method="POST">
            <input type="hidden" name="step" value="representation">
            <button type="submit">Thực thi Bước 4</button>
        </form>
        <div id="representation_output">
            <p>Chưa làm</p>
        </div>
    </div>

    <script>
        function toggleInputType() {
            var manual = document.querySelector('input[value="manual"]').checked;
            document.getElementById('manual_input').style.display = manual ? 'block' : 'none';
            document.getElementById('web_input').style.display = manual ? 'none' : 'block';
        }
    </script>
</body>
</html>